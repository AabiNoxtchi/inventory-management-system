{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Uni-2020\\\\Java\\\\imy-project\\\\inventory-management-system\\\\test-react-app\\\\src\\\\component\\\\SupplierComponent.jsx\";\nimport React, { Component } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport SupplierDataService from '../service/SupplierDataService';\nimport '../myStyles/Style.css';\nimport CustomSelect from './Filters/CustomSelect';\nimport Function from './Shared/Function';\nimport PhoneInput from 'react-phone-input-2';\nimport 'react-phone-input-2/lib/style.css';\n\nclass SupplierComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: this.props.match.params.id,\n      name: '',\n      phoneNumber: '',\n      ddcnumber: '',\n      email: '' //phoneCodes: [],\n      // defaultCodeValue: '',\n      //selectedCode:''\n\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n    this.cancelForm = this.cancelForm.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.state.id);\n\n    if (this.state.id === -1) {\n      return;\n    }\n\n    SupplierDataService.retrieve(this.state.id).then(response => {\n      // console.log(\"response = \" + JSON.stringify(response));\n      this.setState({\n        name: response.data.name || '',\n        phoneNumber: response.data.phoneNumber || '',\n        ddcnumber: response.data.ddcnumber || '',\n        email: response.data.email // phoneCodes: response.data.phoneCodes,\n        // defaultCodeValue: response.data.defaultCodeValue\n\n      });\n    });\n  }\n\n  onSubmit(values, actions) {\n    /* if (values.phoneNumber.length > 1) {\r\n         let phone = this.getPhone();           \r\n     }*/\n    let item = {\n      id: this.state.id,\n      name: values.name,\n      phoneNumber: this.getTrimmedNumber(values.phoneNumber),\n      //.length > 1 ? this.getCode() + \"/\" + values.phoneNumber : null,\n      ddcnumber: values.ddcnumber,\n      email: values.email,\n      targetDate: values.targetDate\n    };\n    console.log('item = ' + JSON.stringify(item));\n    SupplierDataService.save(item).then(() => this.props.history.push('/suppliers')).catch(error => {\n      // console.log(\"error\" + error);\n      console.log(\"error.response.data = \" + JSON.stringify(error.response.data)); //console.log(\"error.response.data.errors = \" + JSON.stringify(error.response.data.errors))\n      //console.log(\"error.response.data.errors[0].codes) = \" + JSON.stringify(error.response.data.errors[0].codes))\n      // console.log(\"error.response.data.errors[0].defaultmsg) = \" + error.response.data.errors[0].defaultMessage)\n\n      let msg = Function.getErrorMsg(error);\n      /* \"\" + error.response && typeof error.response.data == 'string' ?\r\n       error.response.data : error.response.data.errors ?\r\n           error.response.data.errors[0].defaultMessage : error.response.data.message ?\r\n               error.response.data.message : error;*/\n      // console.log(\"msg = \" + msg)\n      //console.log(\"msg.indexOf nop = \" + (msg.indexOf(\"nop\")))\n      //console.log(\"msg.indexOf phone  > 0 = \" + (msg.indexOf(\"phone\") > 0))\n\n      if (msg.indexOf(\"phone\") > -1) actions.setErrors({\n        phoneNumber: msg\n      });\n      if (msg.indexOf(\"name\") > -1) actions.setErrors({\n        name: msg\n      });\n      if (msg.indexOf(\"DDC number\") > -1) actions.setErrors({\n        ddcnumber: msg\n      });\n      if (msg.indexOf(\"email\") > -1) actions.setErrors({\n        email: msg\n      });\n      this.setState({\n        errormsg: msg\n      });\n    });\n  }\n\n  getTrimmedNumber(value) {\n    if (value == null || value.length < 1) return;\n    value = value.trim();\n    value = value.replace(/ +/g, \" \");\n    return value;\n  }\n  /* getCode() {\r\n       let code = (this.state.defaultCodeValue.name || this.state.defaultCodeValue.label);\r\n       code = code.substring(code.indexOf(\"/\")+1, code.length);\r\n       return code;\r\n   }*/\n\n\n  validate(values) {\n    // console.log(\"values = \" + JSON.stringify(values));\n\n    /* console.log(\"(validating values = \");\r\n     console.log(\"(values.phoneNumber.length = \" + (values.phoneNumber.length));\r\n     console.log(\"(values.phoneNumber.length > 1 = \" + (values.phoneNumber.length > 1));\r\n     console.log(\"(values.phoneNumber[0] = \" + (values.phoneNumber[0]));\r\n     console.log(\"(values.phoneNumber[0]==0 = \" + (values.phoneNumber[0] == \"0\"));*/\n    let errors = {};\n\n    if (!values.name) {\n      errors.name = 'required field !!!';\n    } else if (values.name.length < 5) {\n      errors.userName = 'Enter atleast 5 Characters';\n    } else if (values.name.length > 50) {\n      errors.userName = 'too Long Max is 50 charachters';\n    }\n\n    if (!values.ddcnumber) {\n      errors.ddcnumber = 'required field !!!';\n    } else if (values.ddcnumber.length < 4) {\n      errors.ddcnumber = 'Enter at least 4 Characters';\n    } else if (values.ddcnumber.length > 15) {\n      errors.ddcnumber = 'Enter max 15 Characters';\n    }\n    /* if (!values.email) {\r\n         errors.email = 'required field !!!'\r\n     } else if (values.email.length < 4) {\r\n         errors.email = 'Enter atleast 4 Characters'\r\n     }*/\n\n    /* if (values.phoneNumber&&values.phoneNumber.length > 1 && values.phoneNumber[0]==\"0\") {\r\n         errors.phoneNumber = 'phone number must be without leading 0 !!!'\r\n     } else if (values.phoneNumber.length > 15)\r\n         errors.phoneNumber = 'phone number too long !!!'*/\n\n\n    return errors;\n  }\n\n  cancelForm() {\n    // this.props.history.push('/suppliers')\n    window.history.back();\n  }\n\n  render() {\n    let {\n      id,\n      name,\n      phoneNumber,\n      ddcnumber,\n      email\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container pt-5\",\n      children: [this.state.id > 0 ? /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"mb-3\",\n        children: \" Update Supplier\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 38\n      }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"mb-3\",\n        children: \" Add New Supplier \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 83\n      }, this), /*#__PURE__*/_jsxDEV(Formik, {\n        initialValues: {\n          id,\n          name,\n          phoneNumber,\n          ddcnumber,\n          email\n        },\n        onSubmit: (values, actions) => this.onSubmit(values, actions),\n        validateOnChange: false,\n        validateOnBlur: false,\n        validate: this.validate,\n        enableReinitialize: true,\n        children: ({\n          setFieldValue,\n          values,\n          dirty\n        }) => /*#__PURE__*/_jsxDEV(Form, {\n          children: [this.state.errormsg && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-warning\",\n            children: this.state.errormsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 57\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            className: \"form-control \",\n            type: \"text\",\n            name: \"id\",\n            hidden: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n            className: \"form-group w-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"required-field\",\n              children: \"name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Field, {\n              className: \"form-control \",\n              type: \"text\",\n              name: \"name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n              name: \"name\",\n              component: \"div\",\n              className: \"alert alert-warning \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-top\",\n            children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n              className: \"form-group inline w-25 p-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"phone number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Field, {\n                className: \"form-control\",\n                type: \"text\",\n                name: \"phoneNumber\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                name: \"phoneNumber\",\n                component: \"div\",\n                className: \"alert alert-warning\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 33\n            }, this), values.phoneNumber.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"inline ml-5\",\n              style: {\n                fontSize: \"60%\"\n              },\n              children: [\"phone number patterns :\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 60\n              }, this), \"0phone number\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 50\n              }, this), \"phone number\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 49\n              }, this), \"+code/phone number\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 55\n              }, this), \"+codephone number\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 67\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(PhoneInput, {\n            country: 'bg',\n            value: this.state.phone,\n            onChange: phone => this.setState({\n              phone\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n            className: \"form-group w-25\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"required-field\",\n              children: \"DDC number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Field, {\n              className: \"form-control \",\n              maxlength: \"14\",\n              type: \"text\",\n              name: \"ddcnumber\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n              name: \"ddcnumber\",\n              component: \"div\",\n              className: \"alert alert-warning\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n            className: \"form-group w-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Field, {\n              className: \"form-control \",\n              type: \"email\",\n              name: \"email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n              name: \"email\",\n              component: \"div\",\n              className: \"alert alert-warning\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n            className: \"form-group mt-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-mybtn p-x-5\",\n              type: \"submit\",\n              disabled: !dirty,\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-mybtn btn-delete px-5 ml-5\",\n              type: \"button\",\n              onClick: this.cancelForm,\n              children: \"cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default SupplierComponent;","map":{"version":3,"sources":["D:/Uni-2020/Java/imy-project/inventory-management-system/test-react-app/src/component/SupplierComponent.jsx"],"names":["React","Component","Formik","Form","Field","ErrorMessage","SupplierDataService","CustomSelect","Function","PhoneInput","SupplierComponent","constructor","props","state","id","match","params","name","phoneNumber","ddcnumber","email","onSubmit","bind","validate","cancelForm","componentDidMount","console","log","retrieve","then","response","setState","data","values","actions","item","getTrimmedNumber","targetDate","JSON","stringify","save","history","push","catch","error","msg","getErrorMsg","indexOf","setErrors","errormsg","value","length","trim","replace","errors","userName","window","back","render","setFieldValue","dirty","fontSize","phone"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport SupplierDataService from '../service/SupplierDataService';\r\nimport '../myStyles/Style.css';\r\nimport CustomSelect from './Filters/CustomSelect'\r\nimport Function from './Shared/Function';\r\nimport PhoneInput from 'react-phone-input-2'\r\nimport 'react-phone-input-2/lib/style.css'\r\n\r\nclass SupplierComponent extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            id: this.props.match.params.id,\r\n            name: '',\r\n            phoneNumber: '',\r\n            ddcnumber: '',\r\n            email: '',\r\n            //phoneCodes: [],\r\n           // defaultCodeValue: '',\r\n            //selectedCode:''\r\n        }\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n        this.validate = this.validate.bind(this)\r\n        this.cancelForm = this.cancelForm.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(this.state.id)\r\n        if (this.state.id === -1) {\r\n            return\r\n        }\r\n        SupplierDataService.retrieve(this.state.id)\r\n            .then(response => {\r\n               // console.log(\"response = \" + JSON.stringify(response));\r\n                this.setState({\r\n                    name: response.data.name||'',\r\n                    phoneNumber: response.data.phoneNumber||'',\r\n                    ddcnumber: response.data.ddcnumber||'',\r\n                    email: response.data.email,\r\n                   // phoneCodes: response.data.phoneCodes,\r\n                   // defaultCodeValue: response.data.defaultCodeValue\r\n                })\r\n            })\r\n    }\r\n\r\n    onSubmit(values, actions) {\r\n       /* if (values.phoneNumber.length > 1) {\r\n            let phone = this.getPhone();           \r\n        }*/\r\n        let item = {\r\n            id: this.state.id,\r\n            name: values.name,\r\n            phoneNumber: this.getTrimmedNumber(values.phoneNumber),//.length > 1 ? this.getCode() + \"/\" + values.phoneNumber : null,\r\n            ddcnumber: values.ddcnumber,\r\n            email: values.email,\r\n            targetDate: values.targetDate\r\n        }\r\n        console.log('item = ' + JSON.stringify(item));\r\n        SupplierDataService.save(item)\r\n            .then(() => this.props.history.push('/suppliers'))\r\n            .catch(error => {\r\n               // console.log(\"error\" + error);\r\n                console.log(\"error.response.data = \" + JSON.stringify(error.response.data))\r\n                //console.log(\"error.response.data.errors = \" + JSON.stringify(error.response.data.errors))\r\n                //console.log(\"error.response.data.errors[0].codes) = \" + JSON.stringify(error.response.data.errors[0].codes))\r\n               // console.log(\"error.response.data.errors[0].defaultmsg) = \" + error.response.data.errors[0].defaultMessage)\r\n                let msg = Function.getErrorMsg(error);\r\n                   /* \"\" + error.response && typeof error.response.data == 'string' ?\r\n                    error.response.data : error.response.data.errors ?\r\n                        error.response.data.errors[0].defaultMessage : error.response.data.message ?\r\n                            error.response.data.message : error;*/\r\n               // console.log(\"msg = \" + msg)\r\n                //console.log(\"msg.indexOf nop = \" + (msg.indexOf(\"nop\")))\r\n                //console.log(\"msg.indexOf phone  > 0 = \" + (msg.indexOf(\"phone\") > 0))\r\n                if (msg.indexOf(\"phone\") > -1)\r\n                    actions.setErrors({ phoneNumber: msg }) \r\n                if (msg.indexOf(\"name\") > -1)\r\n                    actions.setErrors({ name: msg }) \r\n                if (msg.indexOf(\"DDC number\") > -1)\r\n                    actions.setErrors({ ddcnumber: msg }) \r\n                if (msg.indexOf(\"email\") > -1)\r\n                    actions.setErrors({ email: msg }) \r\n                this.setState({\r\n                    errormsg: msg\r\n                })\r\n\r\n               \r\n               \r\n            } )\r\n    }\r\n\r\n    getTrimmedNumber(value) {\r\n        if (value == null || value.length < 1) return;\r\n       value = value.trim();\r\n        value = value.replace(/ +/g, \" \");\r\n        return value;\r\n    }\r\n\r\n   /* getCode() {\r\n        let code = (this.state.defaultCodeValue.name || this.state.defaultCodeValue.label);\r\n        code = code.substring(code.indexOf(\"/\")+1, code.length);\r\n        return code;\r\n    }*/\r\n\r\n    validate(values) {\r\n\r\n       // console.log(\"values = \" + JSON.stringify(values));\r\n       /* console.log(\"(validating values = \");\r\n        console.log(\"(values.phoneNumber.length = \" + (values.phoneNumber.length));\r\n        console.log(\"(values.phoneNumber.length > 1 = \" + (values.phoneNumber.length > 1));\r\n        console.log(\"(values.phoneNumber[0] = \" + (values.phoneNumber[0]));\r\n        console.log(\"(values.phoneNumber[0]==0 = \" + (values.phoneNumber[0] == \"0\"));*/\r\n\r\n\r\n        let errors = {}\r\n        if (!values.name) {\r\n            errors.name = 'required field !!!'\r\n        } else if (values.name.length < 5) {\r\n            errors.userName = 'Enter atleast 5 Characters'\r\n        } else if (values.name.length >50) {\r\n            errors.userName = 'too Long Max is 50 charachters'\r\n        }\r\n\r\n        if (!values.ddcnumber) {\r\n            errors.ddcnumber = 'required field !!!'\r\n        } else if (values.ddcnumber.length < 4) {\r\n            errors.ddcnumber = 'Enter at least 4 Characters'\r\n        } else if (values.ddcnumber.length > 15) {\r\n            errors.ddcnumber = 'Enter max 15 Characters'\r\n        } \r\n\r\n       /* if (!values.email) {\r\n            errors.email = 'required field !!!'\r\n        } else if (values.email.length < 4) {\r\n            errors.email = 'Enter atleast 4 Characters'\r\n        }*/\r\n\r\n       /* if (values.phoneNumber&&values.phoneNumber.length > 1 && values.phoneNumber[0]==\"0\") {\r\n            errors.phoneNumber = 'phone number must be without leading 0 !!!'\r\n        } else if (values.phoneNumber.length > 15)\r\n            errors.phoneNumber = 'phone number too long !!!'*/\r\n\r\n        return errors\r\n    }\r\n\r\n    cancelForm() {\r\n       // this.props.history.push('/suppliers')\r\n        window.history.back();\r\n    }\r\n\r\n    render() {\r\n        let { id, name, phoneNumber, ddcnumber, email } = this.state\r\n        return (\r\n            <div className=\"container pt-5\">\r\n                {this.state.id > 0 ? <h3 className=\"mb-3\"> Update Supplier</h3> : <h3 className=\"mb-3\"> Add New Supplier </h3>}\r\n                <Formik\r\n                    initialValues={{ id, name, phoneNumber, ddcnumber, email }}\r\n                    onSubmit={(values, actions)=>this.onSubmit(values, actions)}\r\n                    validateOnChange={false}\r\n                    validateOnBlur={false}\r\n                    validate={this.validate}\r\n                    enableReinitialize={true}\r\n                >\r\n                    {\r\n                        ({ setFieldValue, values, dirty }) => (\r\n                            <Form>\r\n                                {this.state.errormsg && <div className=\"alert alert-warning\">{this.state.errormsg}</div>}\r\n                                <Field className=\"form-control \" type=\"text\" name=\"id\" hidden />\r\n                                <fieldset className=\"form-group w-50\">\r\n                                    <label className=\"required-field\">name</label>\r\n                                    <Field className=\"form-control \" type=\"text\" name=\"name\" />\r\n                                    <ErrorMessage name=\"name\" component=\"div\"\r\n                                        className=\"alert alert-warning \" />\r\n                                </fieldset>\r\n                                {/* <fieldset className=\"d-flex\">*/}\r\n                                    {/*  <fieldset className=\"form-group inline w-25\">\r\n                                    <label>country/code</label>\r\n                                        <CustomSelect\r\n                                            style={{overflow:\"auto\"}}\r\n                                        className=\"\"\r\n                                        items={this.state.phoneCodes}\r\n                                            value={this.state.defaultCodeValue.value}\r\n                                            onChange={(value) => {\r\n                                                this.setState({\r\n                                                    defaultCodeValue: value,\r\n                                                    //selectedCode: value.label.substring(value.label.indexOf('+'), value.label.length)\r\n                                                })\r\n                                            }}\r\n                                        />\r\n                                        <ErrorMessage name=\"phoneCode\" component=\"div\"\r\n                                            className=\"alert alert-warning\" />\r\n                                </fieldset>*/}\r\n                                    {/* <fieldset className=\"form-group inline\">\r\n                                        <label>code</label>\r\n                                        <p className=\"form-group mt-2 border-bottom\">+{this.state.defaultCodeValue}</p>\r\n                                    </fieldset>*/}\r\n                                <div className=\"d-flex align-items-top\">\r\n                                <fieldset className=\"form-group inline w-25 p-0\">\r\n                                    <label>phone number</label>\r\n                                    <Field className=\"form-control\" type=\"text\" name=\"phoneNumber\" />\r\n                                    <ErrorMessage name=\"phoneNumber\" component=\"div\"\r\n                                        className=\"alert alert-warning\" />\r\n                                </fieldset>\r\n                                {values.phoneNumber.length > 0 && <p className=\"inline ml-5\" style={{\r\n                                    fontSize: \"60%\"\r\n                                }}>\r\n                                    phone number patterns :<br />\r\n                                    0phone number<br />\r\n                                    phone number<br/>\r\n                                    +code/phone number<br />\r\n                                    +codephone number\r\n                                </p>}\r\n                                </div>\r\n\r\n                                <PhoneInput\r\n                                    country={'bg'}\r\n                                    value={this.state.phone}\r\n                                    onChange={phone => this.setState({ phone })}\r\n                                />\r\n\r\n\r\n                                <fieldset className=\"form-group w-25\">\r\n                                    <label className=\"required-field\">DDC number</label>\r\n                                    <Field className=\"form-control \" maxlength=\"14\" type=\"text\" name=\"ddcnumber\" />\r\n                                    <ErrorMessage name=\"ddcnumber\" component=\"div\"\r\n                                        className=\"alert alert-warning\" />\r\n                                </fieldset>\r\n                                <fieldset className=\"form-group w-50\">\r\n                                    <label>email</label>\r\n                                    <Field className=\"form-control \" type=\"email\" name=\"email\" />\r\n                                    <ErrorMessage name=\"email\" component=\"div\"\r\n                                        className=\"alert alert-warning\" />\r\n                                </fieldset>\r\n                                {//console.log(\"values = \" + JSON.stringify(values))\r\n                                }\r\n                                <fieldset className=\"form-group mt-5\">  \r\n                                <button className=\"btn btn-mybtn p-x-5\" type=\"submit\" disabled={!dirty}>Save</button>\r\n                                    <button className=\"btn btn-mybtn btn-delete px-5 ml-5\" type=\"button\" onClick={this.cancelForm}>cancel</button>\r\n                                </fieldset>\r\n                            </Form>\r\n                        )\r\n                    }\r\n                </Formik>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SupplierComponent"]},"metadata":{},"sourceType":"module"}