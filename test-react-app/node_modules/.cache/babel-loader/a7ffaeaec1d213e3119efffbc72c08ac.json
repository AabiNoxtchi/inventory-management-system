{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Uni-2020\\\\Java\\\\imy-project\\\\inventory-management-system\\\\test-react-app\\\\src\\\\component\\\\Filters\\\\UserProfileFilter.jsx\";\nimport React, { Component } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport CustomSelect from './CustomSelect';\nimport './Filter.css';\nimport DatePicker from \"react-datepicker\";\nimport Functions from './Functions';\n\nclass UserProfileFilter extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      all: props.all,\n      userNames: props.userNames,\n      userId: props.userId,\n      myProfile: props.myProfile,\n      productNames: props.productNames,\n      productId: props.productId,\n      inventoryNumbers: props.inventoryNumbers,\n      filteredInventoryNumbers: props.inventoryNumbers,\n      productDetailId: props.productDetailId,\n      givenAfter: props.givenAfter,\n      returnedBefore: props.returnedBefore,\n      prefix: props.prefix,\n      userRole: props.userRole,\n      current: props.current,\n      allUser: props.allUser //timeline: props.timeline.show\n\n    }; // console.log(\"userRole = \" + this.state.userRole);\n    // console.log(\"timeline = \" + this.state.timeline);\n    // console.log(\"props.timeline = \" + JSON.stringify(this.props.timeline));\n\n    this.onSubmit = this.onSubmit.bind(this);\n    this.resetForm = this.resetForm.bind(this); //  this.productDetailIdRef = React.createRef();\n    // this.givenAfterRef = React.createRef();\n  }\n\n  showOriginal(filter) {// console.log(\"got original filter = \" + JSON.stringify(filter))\n    //this.productDetailIdRef.current.set\n    // this.givenAfterRef.current.setSelected(new Date(filter.givenAfter));\n    //  this.productDetailIdRef.current.setSelected(filter.productDetailId);\n\n    /* this.setState({\r\n         productDetailId: filter.productDetailId,\r\n         givenAfter: filter.givenAfter,\r\n         returnedBefore: filter.returnedBefore\r\n     })*/\n  }\n\n  convertDate(value) {\n    /* if (value && value != 'undefined') {\r\n         // let date = \r\n         value = (new Date(value)).toISOString();\r\n         value = value.substring(0, value.indexOf('T'))\r\n         return value;\r\n     } else return '';*/\n    return Functions.convertDate(value);\n  }\n\n  onSubmit(values) {\n    console.log(\"in submit filter\");\n    console.log(\"this.props.timeline.show = \" + this.props.timeline.show);\n\n    if (this.props.timeline.show) {\n      /* if (key == 'givenAfter' || key == 'returnedBefore') {\r\n           value = (new Date(value)).toISOString();\r\n           value = value.substring(0, value.indexOf('T'))\r\n       }*/\n      console.log(\"preparing filter = \");\n      let filter = {\n        \"productDetailId\": values.productDetailId,\n        \"givenAfter\": '',\n        \"returnedBefore\": ''\n      }; //filter = JSON.parse(JSON.stringify(filter));\n\n      console.log(\"filter 1 = \" + JSON.stringify(filter)); // console.log(\"filter.givenAfter = \" + JSON.stringify(filter.givenAfter));\n      // filter.givenAfter = filter.givenAfter.substring(0, filter.givenAfter.indexOf('T'));//this.convertDate(filter.givenAfter);\n      //filter.returnedBefore = filter.returnedBefore.substring(0, filter.returnedBefore.indexOf('T'));//this.convertDate(filter.returnedBefore);\n\n      filter.givenAfter = this.convertDate(values.givenAfter);\n      console.log(\"filter 2 = \" + JSON.stringify(filter));\n      filter.returnedBefore = this.convertDate(values.returnedBefore);\n      console.log(\"filter 3 = \" + JSON.stringify(filter)); // console.log(\"filter after conversion = \" + JSON.stringify(filter));\n\n      this.props.onSearch(filter);\n      return;\n    }\n\n    let path = window.location.pathname;\n    let search = window.location.search;\n    let newPath = ``;\n\n    if (search.length > 1) {\n      while (search.charAt(0) === '?') {\n        search = search.substring(1);\n      }\n\n      let searchItems = search.split('&');\n\n      for (let i = 0; i < searchItems.length; i++) {\n        if (searchItems[i].startsWith('Pager.itemsPerPage=')) newPath += searchItems[i] + '&';\n      }\n    }\n\n    let prefix = this.state.prefix;\n    Object.entries(values).map(([key, value]) => {\n      /*if (!key.endsWith(\"s\")) {\r\n          console.log(\"key : \" + key + \" value = \" + value);\r\n         // console.log(\"value != 'undefined' : \" + (value != 'undefined'))//+ \" value.length > 1 = \" + (value.length > 1));\r\n          if(value)\r\n         // console.log( \" value.length > 1 = \" + (value.length > 1));\r\n               console.log(\"value != 'undefined' : \" + (value != 'undefined'))//+ \" value.length > 1 = \" + (value.length > 1));\r\n        }*/\n      if (!key.endsWith(\"s\") && value && value != 'undefined') {\n        if (key == 'givenAfter' || key == 'returnedBefore') {\n          value = this.convertDate(value); //(new Date(value)).toISOString();\n          //value = value.substring(0, value.indexOf('T'))\n        }\n        /*  if (this.props.timeline.show && (\r\n              key == 'givenAfter' || key == 'returnedBefore' || key == 'productDetailId'\r\n              )) {\r\n              newPath += prefix + '.' + key + '=' + value + '&'\r\n          }else*/\n\n\n        newPath += prefix + '.' + key + '=' + value + '&'; //console.log(\"new path = \" + newPath)\n      }\n    });\n    newPath = newPath.substring(0, newPath.length - 1);\n    /* if (this.props.timeline.show) {\r\n           newPath += \"Filter.filtersSet=true\";\r\n           newPath = '?' + newPath;\r\n           this.props.onSearch(newPath);\r\n     } else {*/\n\n    newPath = path + '?' + newPath; // console.log('newPath =' + newPath);\n\n    window.location.href = newPath; // }\n  }\n\n  resetForm() {\n    window.location.href = window.location.pathname;\n    /* this.setState({\r\n         all: '',\r\n         firstName: '',\r\n         lastName: '',\r\n         userName: '',\r\n         email: '',\r\n     });\r\n     console.log('in reset form ');*/\n  }\n\n  render() {\n    //console.log(\"rendering filter props.timeline = \" + this.props.timeline.show);\n    let {\n      all,\n      userNames,\n      userId,\n      myProfile,\n      inventoryNumbers,\n      productDetailId,\n      productNames,\n      productId,\n      givenAfter,\n      returnedBefore,\n      filteredInventoryNumbers,\n      current,\n      allUser\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: {\n        all,\n        userNames,\n        userId,\n        myProfile,\n        inventoryNumbers,\n        productDetailId,\n        productNames,\n        productId,\n        givenAfter,\n        returnedBefore,\n        filteredInventoryNumbers,\n        current,\n        allUser\n      },\n      onSubmit: this.onSubmit,\n      enableReinitialize: true,\n      children: ({\n        props,\n        setFieldValue,\n        values\n      }) => /*#__PURE__*/_jsxDEV(Form, {\n        className: \"filter-form\",\n        children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          children: [/*#__PURE__*/_jsxDEV(Field, {\n            className: \"ml-2 mr-1\",\n            type: \"checkbox\",\n            name: \"current\",\n            value: values.current,\n            checked: values.current,\n            disabled: this.props.timeline.show,\n            onChange: value => {\n              // console.log('value of checked = ' + value.target.value);\n              setFieldValue(\"current\", !values.current); // setFieldValue(\"userId\", 'undefined')\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 29\n          }, this), \"  \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-weight-bold\",\n            children: \"current\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 33\n          }, this), this.state.userRole == 'ROLE_Mol' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inline ml-3\",\n              children: [/*#__PURE__*/_jsxDEV(Field, {\n                className: \"mr-1\",\n                type: \"checkbox\",\n                name: \"myProfile\",\n                value: values.myProfile,\n                checked: values.myProfile,\n                disabled: this.props.timeline.show,\n                onChange: value => {\n                  // console.log('value of checked = ' + value.target.value);\n                  setFieldValue(\"myProfile\", !values.myProfile);\n                  setFieldValue(\"userId\", 'undefined');\n                  setFieldValue(\"allUser\", false);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 41\n              }, this), \"  \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-weight-bold\",\n                children: \"my profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inline ml-3\",\n              children: [/*#__PURE__*/_jsxDEV(Field, {\n                className: \"mr-1\",\n                type: \"checkbox\",\n                name: \"allUser\",\n                value: values.allUser,\n                checked: values.allUser,\n                disabled: this.props.timeline.show,\n                onChange: value => {\n                  // console.log('value of checked = ' + value.target.value);\n                  setFieldValue(\"allUser\", !values.allUser);\n                  setFieldValue(\"userId\", 'undefined');\n                  setFieldValue(\"myProfile\", false);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 37\n              }, this), \"  \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-weight-bold\",\n                children: \"users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inline ml-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"font-weight-bold\",\n                children: \"user\\xA0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(CustomSelect, {\n                className: \"inline inline-4\",\n                items: userNames,\n                disabled: this.props.timeline.show,\n                value: values.userId,\n                onChange: selected => {\n                  setFieldValue(\"myProfile\", false);\n                  setFieldValue(\"userId\", selected.value);\n                  setFieldValue(\"allUser\", false);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"product\\xA0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(CustomSelect, {\n              className: \"inline inline-4\",\n              items: productNames,\n              disabled: this.props.timeline.show,\n              value: values.productId,\n              onChange: selected => {\n                setFieldValue(\"productId\", selected.value);\n                let subs = values.filteredInventoryNumbers; // let sub = values.filteredInventoryNumbers.\n\n                subs = [];\n\n                for (let i = 0; i < values.inventoryNumbers.length; i++) {\n                  if (values.inventoryNumbers[i].filterBy == selected.value) {\n                    subs.push(values.inventoryNumbers[i]);\n                  }\n                }\n\n                setFieldValue(\"filteredInventoryNumbers\", subs);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"inventory number\\xA0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(CustomSelect // ref={(x) => { this.productDetailIdRef = x}}\n            , {\n              className: \"inline inline-4\",\n              items: values.filteredInventoryNumbers,\n              value: values.productDetailId,\n              onChange: selected => setFieldValue(\"productDetailId\", selected.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"mb-1\",\n              children: \"timeline\\xA0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inline px-2 border\",\n              style: {\n                borderRadius: \"3px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"mb-1 fw-s\",\n                children: \"given after\\xA0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inline \",\n                children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                  className: \"form-control in-inline inline-2\" // ref={this.givenAfterRef}\n                  ,\n                  dateFormat: \"dd MMMM yyyy\",\n                  locale: \"en-GB\",\n                  maxDate: values.returnedBefore && new Date(values.returnedBefore) || new Date().setDate(new Date().getDate() - 1),\n                  selected: values.givenAfter && new Date(values.givenAfter),\n                  isClearable: true,\n                  onChange: date => setFieldValue(\"givenAfter\", date),\n                  shouldCloseOnSelect: true,\n                  showYearDropdown: true,\n                  dropdownMode: \"select\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"pl-1 mb-1 fw-s\",\n                children: \"returned before\\xA0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n                className: \"form-control in-inline inline-2\",\n                dateFormat: \"MMMM dd yyyy\",\n                locale: \"en-GB\",\n                minDate: values.givenAfter && new Date(values.givenAfter).setDate(new Date(values.givenAfter).getDate() + 1),\n                maxDate: new Date().setDate(new Date().getDate() + 1),\n                selected: values.returnedBefore && new Date(values.returnedBefore),\n                onChange: date => setFieldValue(\"returnedBefore\", date),\n                isClearable: true,\n                highlightDates: new Date(),\n                shouldCloseOnSelect: true,\n                showYearDropdown: true,\n                dropdownMode: \"select\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button px-5\",\n              type: \"submit\",\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button btn-delete\",\n              type: \"button\",\n              disabled: this.props.timeline.show,\n              onClick: this.resetForm,\n              children: \"reset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default UserProfileFilter;","map":{"version":3,"sources":["D:/Uni-2020/Java/imy-project/inventory-management-system/test-react-app/src/component/Filters/UserProfileFilter.jsx"],"names":["React","Component","Formik","Form","Field","ErrorMessage","CustomSelect","DatePicker","Functions","UserProfileFilter","constructor","props","state","all","userNames","userId","myProfile","productNames","productId","inventoryNumbers","filteredInventoryNumbers","productDetailId","givenAfter","returnedBefore","prefix","userRole","current","allUser","onSubmit","bind","resetForm","showOriginal","filter","convertDate","value","values","console","log","timeline","show","JSON","stringify","onSearch","path","window","location","pathname","search","newPath","length","charAt","substring","searchItems","split","i","startsWith","Object","entries","map","key","endsWith","href","render","setFieldValue","selected","subs","filterBy","push","borderRadius","Date","setDate","getDate","date"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport CustomSelect from './CustomSelect';\r\nimport './Filter.css';\r\nimport DatePicker from \"react-datepicker\";\r\nimport Functions from './Functions'\r\n\r\n\r\nclass UserProfileFilter extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            all: props.all,            \r\n            userNames: props.userNames,\r\n            userId: props.userId,\r\n            myProfile: props.myProfile,\r\n            productNames: props.productNames,\r\n            productId: props.productId,\r\n            inventoryNumbers: props.inventoryNumbers,\r\n            filteredInventoryNumbers: props.inventoryNumbers,\r\n            productDetailId: props.productDetailId,\r\n            givenAfter: props.givenAfter,\r\n            returnedBefore: props.returnedBefore,\r\n            prefix: props.prefix,\r\n            userRole: props.userRole,\r\n            current: props.current,\r\n            allUser: props.allUser\r\n            //timeline: props.timeline.show\r\n        }\r\n       // console.log(\"userRole = \" + this.state.userRole);\r\n       // console.log(\"timeline = \" + this.state.timeline);\r\n       // console.log(\"props.timeline = \" + JSON.stringify(this.props.timeline));\r\n\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n        this.resetForm = this.resetForm.bind(this)\r\n      //  this.productDetailIdRef = React.createRef();\r\n       // this.givenAfterRef = React.createRef();\r\n    }\r\n\r\n    showOriginal(filter) {\r\n       // console.log(\"got original filter = \" + JSON.stringify(filter))\r\n        //this.productDetailIdRef.current.set\r\n       // this.givenAfterRef.current.setSelected(new Date(filter.givenAfter));\r\n      //  this.productDetailIdRef.current.setSelected(filter.productDetailId);\r\n       /* this.setState({\r\n            productDetailId: filter.productDetailId,\r\n            givenAfter: filter.givenAfter,\r\n            returnedBefore: filter.returnedBefore\r\n        })*/\r\n    }\r\n\r\n    convertDate(value) {\r\n       /* if (value && value != 'undefined') {\r\n            // let date = \r\n            value = (new Date(value)).toISOString();\r\n            value = value.substring(0, value.indexOf('T'))\r\n            return value;\r\n        } else return '';*/\r\n       return Functions.convertDate(value);\r\n    }\r\n    onSubmit(values) {\r\n        console.log(\"in submit filter\");\r\n        console.log(\"this.props.timeline.show = \" + this.props.timeline.show);\r\n        if (this.props.timeline.show) {\r\n           /* if (key == 'givenAfter' || key == 'returnedBefore') {\r\n                value = (new Date(value)).toISOString();\r\n                value = value.substring(0, value.indexOf('T'))\r\n            }*/\r\n            console.log(\"preparing filter = \");\r\n            let filter = { \"productDetailId\": values.productDetailId, \"givenAfter\": '', \"returnedBefore\": '' };\r\n              //filter = JSON.parse(JSON.stringify(filter));\r\n            console.log(\"filter 1 = \" + JSON.stringify(filter));\r\n           // console.log(\"filter.givenAfter = \" + JSON.stringify(filter.givenAfter));\r\n           // filter.givenAfter = filter.givenAfter.substring(0, filter.givenAfter.indexOf('T'));//this.convertDate(filter.givenAfter);\r\n            //filter.returnedBefore = filter.returnedBefore.substring(0, filter.returnedBefore.indexOf('T'));//this.convertDate(filter.returnedBefore);\r\n            filter.givenAfter = this.convertDate(values.givenAfter);\r\n            console.log(\"filter 2 = \" + JSON.stringify(filter));\r\n            filter.returnedBefore = this.convertDate(values.returnedBefore);\r\n            console.log(\"filter 3 = \" + JSON.stringify(filter));\r\n           // console.log(\"filter after conversion = \" + JSON.stringify(filter));\r\n            this.props.onSearch(filter);\r\n            return;\r\n        }\r\n\r\n        let path = window.location.pathname;\r\n        let search = window.location.search;\r\n        let newPath = ``;\r\n\r\n        if (search.length > 1) {\r\n            while (search.charAt(0) === '?') {\r\n                search = search.substring(1);\r\n            }\r\n            let searchItems = search.split('&');\r\n            for (let i = 0; i < searchItems.length; i++) {\r\n\r\n                if (searchItems[i].startsWith('Pager.itemsPerPage='))\r\n                    newPath += searchItems[i] + '&'\r\n            }\r\n        }\r\n\r\n        let prefix = this.state.prefix;\r\n        Object.entries(values).map(([key, value]) => {\r\n            /*if (!key.endsWith(\"s\")) {\r\n                console.log(\"key : \" + key + \" value = \" + value);\r\n               // console.log(\"value != 'undefined' : \" + (value != 'undefined'))//+ \" value.length > 1 = \" + (value.length > 1));\r\n                if(value)\r\n               // console.log( \" value.length > 1 = \" + (value.length > 1));\r\n                     console.log(\"value != 'undefined' : \" + (value != 'undefined'))//+ \" value.length > 1 = \" + (value.length > 1));\r\n\r\n            }*/\r\n            if (!key.endsWith(\"s\") && value && value != 'undefined') {\r\n                if (key == 'givenAfter' || key == 'returnedBefore') {\r\n                    value = this.convertDate(value);//(new Date(value)).toISOString();\r\n                    //value = value.substring(0, value.indexOf('T'))\r\n                }\r\n              /*  if (this.props.timeline.show && (\r\n                    key == 'givenAfter' || key == 'returnedBefore' || key == 'productDetailId'\r\n                    )) {\r\n                    newPath += prefix + '.' + key + '=' + value + '&'\r\n                }else*/\r\n                     newPath += prefix + '.' + key + '=' + value + '&'\r\n                //console.log(\"new path = \" + newPath)\r\n            }\r\n\r\n        })\r\n        newPath = newPath.substring(0, newPath.length - 1);\r\n       /* if (this.props.timeline.show) {\r\n              newPath += \"Filter.filtersSet=true\";\r\n              newPath = '?' + newPath;\r\n              this.props.onSearch(newPath);\r\n        } else {*/\r\n            newPath = path + '?' + newPath;\r\n            // console.log('newPath =' + newPath);\r\n\r\n            window.location.href = newPath;\r\n\r\n       // }\r\n      \r\n       \r\n       \r\n    }\r\n\r\n    resetForm() {\r\n\r\n        window.location.href = window.location.pathname;\r\n       /* this.setState({\r\n            all: '',\r\n            firstName: '',\r\n            lastName: '',\r\n            userName: '',\r\n            email: '',\r\n        });\r\n        console.log('in reset form ');*/\r\n    }\r\n\r\n    render() {\r\n        //console.log(\"rendering filter props.timeline = \" + this.props.timeline.show);\r\n\r\n        let { all, userNames, userId, myProfile, inventoryNumbers, productDetailId, productNames,\r\n            productId, givenAfter, returnedBefore, filteredInventoryNumbers , current, allUser} = this.state\r\n        return (\r\n\r\n            <Formik\r\n                initialValues={{\r\n                    all, userNames, userId, myProfile, inventoryNumbers, productDetailId, productNames,\r\n                    productId, givenAfter, returnedBefore, filteredInventoryNumbers, current, allUser\r\n                }}\r\n                onSubmit={this.onSubmit}\r\n                enableReinitialize={true}\r\n            >\r\n                {({ props, setFieldValue, values }) => (\r\n                    <Form className=\"filter-form\">\r\n                        <fieldset >\r\n\r\n                            <Field\r\n                                className=\"ml-2 mr-1\" type=\"checkbox\" name=\"current\"\r\n                                value={values.current} checked={values.current}\r\n                                disabled={this.props.timeline.show}\r\n                                onChange={(value) => {\r\n                                    // console.log('value of checked = ' + value.target.value);\r\n                                    setFieldValue(\"current\", !values.current);\r\n                                    // setFieldValue(\"userId\", 'undefined')\r\n                                }}\r\n                            />  <span className=\"font-weight-bold\">current</span>\r\n                            {\r\n                                this.state.userRole == 'ROLE_Mol' &&\r\n                                <div className=\"inline\">\r\n                                    <div className=\"inline ml-3\">\r\n                                        <Field\r\n                                        className=\"mr-1\" type=\"checkbox\" name=\"myProfile\"\r\n                                        value={values.myProfile} checked={values.myProfile}\r\n                                        disabled={this.props.timeline.show}\r\n                                            onChange={(value) => {\r\n                                                // console.log('value of checked = ' + value.target.value);\r\n                                                setFieldValue(\"myProfile\", !values.myProfile);\r\n                                                setFieldValue(\"userId\", 'undefined');\r\n                                                setFieldValue(\"allUser\", false)\r\n                                            }}\r\n                                    />  <span className=\"font-weight-bold\">my profile</span>\r\n                                    </div>\r\n                                    <div className=\"inline ml-3\">\r\n                                    <Field\r\n                                        className=\"mr-1\" type=\"checkbox\" name=\"allUser\"\r\n                                        value={values.allUser} checked={values.allUser}\r\n                                        disabled={this.props.timeline.show}\r\n                                        onChange={(value) => {\r\n                                            // console.log('value of checked = ' + value.target.value);\r\n                                            setFieldValue(\"allUser\", !values.allUser);\r\n                                            setFieldValue(\"userId\", 'undefined');\r\n                                            setFieldValue(\"myProfile\", false)\r\n                                        }}\r\n                                        />  <span className=\"font-weight-bold\">users</span>\r\n                                    </div>\r\n                                   \r\n\r\n                                    <div className=\"inline ml-3\">\r\n                                        <label className=\"font-weight-bold\">user&nbsp;</label>\r\n                                        <CustomSelect\r\n                                            className={\"inline inline-4\"}\r\n                                            items={userNames}\r\n                                            disabled={this.props.timeline.show}\r\n                                            value={values.userId}\r\n                                            onChange={(selected) => {\r\n                                                setFieldValue(\"myProfile\", false);\r\n                                                setFieldValue(\"userId\", selected.value);\r\n                                                setFieldValue(\"allUser\", false)\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                            <div className=\"inline\">\r\n                                <label >product&nbsp;</label>\r\n                                <CustomSelect\r\n                                    className={\"inline inline-4\"}\r\n                                    items={productNames}\r\n                                    disabled={this.props.timeline.show}\r\n                                    value={values.productId}\r\n                                    onChange={(selected) => {\r\n                                        setFieldValue(\"productId\", selected.value);\r\n                                        let subs = values.filteredInventoryNumbers;\r\n                                        // let sub = values.filteredInventoryNumbers.\r\n                                        subs = [];\r\n                                        for (let i = 0; i < values.inventoryNumbers.length; i++) {\r\n\r\n                                            if (values.inventoryNumbers[i].filterBy == selected.value) {\r\n                                                subs.push(values.inventoryNumbers[i])\r\n                                            }\r\n                                        }\r\n                                        setFieldValue(\"filteredInventoryNumbers\", subs);\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                            <div className=\"inline\">\r\n                                <label >inventory number&nbsp;</label>\r\n                                <CustomSelect\r\n                                   // ref={(x) => { this.productDetailIdRef = x}}\r\n                                    className={\"inline inline-4\"}\r\n                                    items={values.filteredInventoryNumbers}\r\n                                   \r\n                                    value={values.productDetailId}\r\n                                    onChange={(selected) => setFieldValue(\"productDetailId\", selected.value)}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"inline\">\r\n                                <label className=\"mb-1\">timeline&nbsp;</label>\r\n                                <div className=\"inline px-2 border\" style={{borderRadius:\"3px\"}}>\r\n                                    <label className=\"mb-1 fw-s\">given after&nbsp;</label>\r\n                                    <div className=\"inline \">\r\n                                        <DatePicker className=\"form-control in-inline inline-2\"\r\n                                           // ref={this.givenAfterRef}\r\n                                            dateFormat=\"dd MMMM yyyy\"\r\n                                           \r\n                                            locale=\"en-GB\"\r\n                                            maxDate={values.returnedBefore && new Date(values.returnedBefore) || (new Date()).setDate((new Date()).getDate() - 1)}\r\n                                            selected={values.givenAfter && new Date(values.givenAfter)}\r\n                                            isClearable\r\n                                            onChange={date => setFieldValue(\"givenAfter\", date)}\r\n                                            shouldCloseOnSelect={true}\r\n                                            showYearDropdown\r\n                                            dropdownMode=\"select\"/>\r\n                                    </div>\r\n\r\n                                    <label className=\"pl-1 mb-1 fw-s\">returned before&nbsp;</label>\r\n                                    <DatePicker className=\"form-control in-inline inline-2\"\r\n                                        dateFormat=\"MMMM dd yyyy\"\r\n                                        \r\n                                        locale=\"en-GB\"\r\n                                        minDate={values.givenAfter &&\r\n                                            new Date(values.givenAfter).setDate((new Date(values.givenAfter)).getDate() + 1)}\r\n                                        maxDate={(new Date()).setDate((new Date()).getDate()+1)}\r\n                                        selected={values.returnedBefore && new Date(values.returnedBefore)}\r\n                                        onChange={date => setFieldValue(\"returnedBefore\", date)}\r\n                                        isClearable\r\n                                        highlightDates={new Date()}\r\n                                        shouldCloseOnSelect={true}\r\n                                        showYearDropdown\r\n                                        dropdownMode=\"select\"/>\r\n                                </div>\r\n                            </div>\r\n\r\n                           \r\n                           \r\n                           \r\n                            <div className=\"inline\">\r\n                                <button className=\"button px-5\" type=\"submit\" >Search</button>\r\n                                <button className=\"button btn-delete\" type=\"button\" disabled={this.props.timeline.show} onClick={this.resetForm}>reset</button>\r\n                            </div>\r\n                        </fieldset>\r\n                    </Form>\r\n                )\r\n                }\r\n            </Formik>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UserProfileFilter"]},"metadata":{},"sourceType":"module"}